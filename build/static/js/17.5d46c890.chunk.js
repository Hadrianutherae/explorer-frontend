(this["webpackJsonpblockchain-explorer"]=this["webpackJsonpblockchain-explorer"]||[]).push([[17],{787:function(e,t,a){},790:function(e,t,a){},791:function(e,t,a){},792:function(e,t,a){},793:function(e,t,a){},866:function(e,t,a){"use strict";a.r(t),a.d(t,"ChartComponent",(function(){return K}));var n,r=a(8),i=a(9),c=a(17),l=a(12),s=a(11),o=a(39),p=a.n(o),m=a(61),h=a.n(m),u=a(0),b=a.n(u),d=a(107),f=a.n(d),v=a(29),y=a(30),E=a(36),_=a(20);!function(e){e.DAYS_30="30days",e.DAYS_60="60days",e.DAYS_180="180days",e.YEAR_1="1year",e.YEAR_2="2years",e.ALLTIME="alltime"}(n||(n={}));var g=a(99),k=a(42),j=a.n(k),O=a(16),C=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"getChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.timespan===n.ALLTIME?"all":t.timespan;return j.a.get("".concat(O.a.apiUrl,"/charts/").concat(e),{params:{timespan:a||n.DAYS_30}}).then((function(t){return t?t.data:Promise.reject("Block api service. Request: ".concat(O.a.apiUrl,"/charts/").concat(e,"."))}))}}]),e}(),A={getChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){return a({type:g.a}),C.getChart(e,t).then((function(e){a({payload:{data:e},type:g.b})}))}}},N=a(1),x=a(411),F=a.n(x),S=a(559),T=a(110),D=a(73),L=(a(787),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=F()(this.props.label).format("DD.MM.YYYY"),t=null,a=this.props.payload?this.props.payload[0]:null;if(a){var n=a.payload.type||"chart",r=this.props.isScale?a.payload.originalValue:this.props.payload[0].value;t=Object(T.a)(n,r)}return b.a.createElement("div",{className:"bi-chart-tooltip"},b.a.createElement("div",{className:"bi-chart-tooltip__label"},e),t)}}]),a}(b.a.PureComponent)),M=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).formatLabel=n.formatLabel.bind(Object(c.a)(n)),n.formatXLabel=n.formatXLabel.bind(Object(c.a)(n)),n.formatTooltip=n.formatTooltip.bind(Object(c.a)(n)),n.renderTooltip=n.renderTooltip.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.data,t=Math.ceil(Math.max.apply(null,e.map((function(e){return e.value})))),a=(Math.ceil(t/Math.pow(10,t.toString().length-1))+2)*Math.pow(10,t.toString().length-1);return this.props.isScale&&(e=e.map((function(e){return Object(N.a)(Object(N.a)({},e),{},{originalValue:e.value,value:e.value<=0?1e-4:e.value})}))),b.a.createElement(S.g,{width:"100%",height:"100%"},b.a.createElement(S.b,{data:e},b.a.createElement("defs",null,b.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"1",x2:"1",y2:"0"},b.a.createElement("stop",{offset:"20%",stopColor:"#0078FF",stopOpacity:0}),b.a.createElement("stop",{offset:"80%",stopColor:"#0078FF",stopOpacity:.2}))),this.props.compact?null:b.a.createElement(S.c,{stroke:"#e8e8e8",vertical:!1,strokeDasharray:"6 4",fill:"#fff"}),b.a.createElement(S.j,{dataKey:"timestamp",tick:{fill:"#828795",fontSize:14},tickLine:!1,tickCount:100,tickMargin:10,tickFormatter:this.formatXLabel,minTickGap:30,hide:this.props.compact}),b.a.createElement(S.k,{dataKey:"value",domain:[this.props.isScale?1e-4:0,a],scale:this.props.isScale?"log":"auto",tickMargin:10,tickLine:!1,tickCount:5,minTickGap:30,tick:{fill:"#828795",fontSize:14},tickFormatter:this.formatLabel,hide:this.props.compact}),b.a.createElement(S.i,{content:this.renderTooltip}),b.a.createElement(S.a,{type:"linear",dataKey:"value",stroke:"#0078FF",yAxisId:0,fillOpacity:1,fill:"url(#colorUv)",animationDuration:300,isAnimationActive:!this.props.compact})))}},{key:"renderTooltip",value:function(e){return b.a.createElement(L,Object.assign({},e,{isScale:this.props.isScale}))}},{key:"formatLabel",value:function(e){return Object(D.a)(e,{fractionDigits:0})}},{key:"formatXLabel",value:function(e){return F()(e).format("DD MMM YYYY")}},{key:"formatTooltip",value:function(e){return Object(T.a)("chart",e)}}]),a}(b.a.PureComponent),U=a(43),Y=a(788),w=a.n(Y),R=(a(790),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return b.a.createElement("div",{className:"bi-chart-actions"},this.props.isScale?b.a.createElement(E.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale",null)},b.a.createElement(v.a,{id:"components.chart-actions.linear-scale"})):b.a.createElement(E.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale","1")},b.a.createElement(v.a,{id:"components.chart-actions.logarithmic-scale"})),this.props.data&&b.a.createElement(w.a,{file:"data.csv",content:this.getCSVData(),className:"bi-chart-actions__action bi-btn bi-btn--flat"},b.a.createElement(v.a,{id:"components.chart-actions.csv"})),this.props.data&&b.a.createElement(w.a,{file:"data.json",content:JSON.stringify(this.props.data),className:"bi-chart-actions__action bi-btn bi-btn--flat"},b.a.createElement(v.a,{id:"components.chart-actions.json"})))}},{key:"getCSVData",value:function(){if(!this.props.data)return"";var e=this.props.data.map((function(e){return[e.timestamp,e.value].join(", ")}));return["timestamp, value"].concat(Object(U.a)(e)).join("\r\n")}}]),a}(b.a.Component)),P=(a(791),["#0088FE","#85144b","#FFBB28","#FF8042","#2ECC40","#FF4136","#001f3f","#0074D9","#FF851B","#00C49F","#F012BE","#7FDBFF","#FFDC00","#39CCCC","#3D9970","#B10DC9","#01FF70"]),B=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={activeIndex:0},e.renderActiveShape=function(e){var t=Math.PI/180,a=e.cx,n=e.cy,r=e.midAngle,i=e.innerRadius,c=e.outerRadius,l=e.startAngle,s=e.endAngle,o=e.fill,p=e.payload,m=e.percent,h=e.value,u=Math.sin(-t*r),d=Math.cos(-t*r),f=a+(c+10)*d,v=n+(c+10)*u,y=a+(c+30)*d,E=n+(c+30)*u,_=y+22*(d>=0?1:-1),g=E,k=d>=0?"start":"end";return b.a.createElement("g",null,b.a.createElement("text",{x:a,y:n,dy:8,textAnchor:"middle",fill:o},p.name),b.a.createElement(S.h,{cx:a,cy:n,innerRadius:i,outerRadius:c,startAngle:l,endAngle:s,fill:o}),b.a.createElement(S.h,{cx:a,cy:n,startAngle:l,endAngle:s,innerRadius:c+6,outerRadius:c+10,fill:o}),b.a.createElement("path",{d:"M".concat(f,",").concat(v,"L").concat(y,",").concat(E,"L").concat(_,",").concat(g),stroke:o,fill:"none"}),b.a.createElement("circle",{cx:_,cy:g,r:2,fill:o,stroke:"none"}),b.a.createElement("text",{x:_+12*(d>=0?1:-1),y:g,textAnchor:k,fill:"#333"},"Blocks: ".concat(h)),b.a.createElement("text",{x:_+12*(d>=0?1:-1),y:g,dy:18,textAnchor:k,fill:"#999"},"(Rate: ".concat((100*m).toFixed(2),"%)")))},e.onPieEnter=function(t,a){e.setState({activeIndex:a})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.data.map((function(e){return{name:e.name,value:e.value}})).sort((function(e,t){return t.y-e.y}));return b.a.createElement("div",{className:"bi-pie-chart"},b.a.createElement("div",{className:"bi-pie-chart__chart"},b.a.createElement(S.g,null,b.a.createElement(S.f,null,b.a.createElement(S.e,{activeIndex:this.state.activeIndex,activeShape:this.renderActiveShape,data:t,innerRadius:100,outerRadius:140,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter},t.map((function(e,t){return b.a.createElement(S.d,{key:"cell-".concat(e.value),fill:P[t%P.length]})})))))),b.a.createElement("div",{className:"bi-pie-chart__legend bi-pie-chart__table bi-table"},b.a.createElement("div",{className:"bi-pie-chart__row bi-table__row bi-pie-chart__row--header"},b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},this.props.labels.name),b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},this.props.labels.value)),this.props.data.map((function(t,a){return b.a.createElement("div",{className:"bi-pie-chart__row bi-table__row",key:a},b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},b.a.createElement("span",null,e.props.labels.name)," ",t.name),b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},b.a.createElement("span",null,e.props.labels.value)," ",t.value))}))))}}]),a}(b.a.PureComponent),I=(a(792),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return b.a.createElement("div",{className:"bi-timespan"},Object.keys(n).map((function(t){var a=p()({"bi-btn":!0,"bi-btn--flat":!0,"bi-timespan__span":!0,"bi-timespan__span--active":e.props.selected===n[t]});return b.a.createElement(E.Link,{className:a,key:t,to:e.props.getTimespanUrl(n[t])},b.a.createElement(v.a,{id:"components.timespan.span.".concat(n[t])}))})))}}]),a}(b.a.Component)),J=a(14),z=(a(793),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).params={},n.getTimespanUrl=n.getTimespanUrl.bind(Object(c.a)(n)),n.getChartActionUrl=n.getChartActionUrl.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.params=this.getParams(),this.props.getChart(this.props.match.params.chartType,this.params)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getParams();JSON.stringify(t)!==JSON.stringify(this.params)&&(this.params=t,this.props.getChart(this.props.match.params.chartType,this.params))}},{key:"render",value:function(){var e=h.a.parse(this.props.location.search),t=e.iframe,a=e.scale,n=p()({"bi-chart":!0,"bi-chart--iframe":t,"bi-chart--scale":"1"===a,"g-flex-column":!0,"g-flex-column__item-fixed":!0});return b.a.createElement("div",{className:n},b.a.createElement(v.a,{id:"common.pages.chart.title.".concat(this.props.match.params.chartType)},(function(e){return b.a.createElement(f.a,null,b.a.createElement("title",null,e))})),b.a.createElement("div",{className:"bi-chart__header g-flex-column__item-fixed"},b.a.createElement("div",{className:"bi-chart__line"},b.a.createElement(E.Link,{className:"bi-chart__btn-back",to:"/charts"},b.a.createElement(J.d,{className:"bi-chart__btn-back-icon"}),b.a.createElement("span",{className:"bi-chart__btn-back-title"},b.a.createElement(v.a,{id:"components.chart.back"})))),b.a.createElement("div",{className:"bi-chart__title"},b.a.createElement(v.a,{id:"components.chart.title.".concat(this.props.match.params.chartType)})),b.a.createElement("div",{className:"bi-chart__subtitle"},b.a.createElement(v.a,{id:"components.chart.subtitle.".concat(this.props.match.params.chartType)}))),this.renderBody())}},{key:"renderBody",value:function(){return b.a.createElement("div",{className:"bi-chart__body g-flex-column__item"},b.a.createElement("div",{className:"bi-chart__chart"},this.props.data&&this.renderChart()),this.renderControls())}},{key:"renderChart",value:function(){var e=h.a.parse(this.props.location.search).iframe;switch(this.props.match.params.chartType){case"hash-rate-distribution":return b.a.createElement(B,{data:this.formatData(),compact:!!e,labels:{name:b.a.createElement(v.a,{id:"components.chart.hash-rate-distribution.labels.name"}),value:b.a.createElement(v.a,{id:"components.chart.hash-rate-distribution.labels.value"})}});default:return b.a.createElement(M,{data:this.formatData(),compact:!!e,isScale:this.params.scale})}}},{key:"renderControls",value:function(){switch(this.props.match.params.chartType){case"hash-rate-distribution":return null;default:return b.a.createElement("div",{className:"bi-chart__controls g-flex"},b.a.createElement(I,{selected:this.params.timespan,getTimespanUrl:this.getTimespanUrl}),b.a.createElement(R,{isScale:this.params.scale,data:this.props.data,getChartActionUrl:this.getChartActionUrl}))}}},{key:"formatData",value:function(){switch(this.props.match.params.chartType){case"miners-revenue":case"total":return this.props.data.map((function(e){return{timestamp:e.timestamp,type:"coin",value:e.value/1e9}}));case"blockchain-size":case"block-size":return this.props.data.map((function(e){return{timestamp:e.timestamp,type:"bytes",value:e.value}}));case"hash-rate":return this.props.data.slice(0,this.props.data.length-1).map((function(e){return{timestamp:e.timestamp,type:"hashRateDay",value:e.value}}));default:return this.props.data}}},{key:"getParams",value:function(){var e=h.a.parse(this.props.history.location.search),t=Object.keys(n).find((function(t){return n[t]===e.timespan}));return{scale:"1"===e.scale,timespan:t?n[t]:n.DAYS_30}}},{key:"getTimespanUrl",value:function(e){var t=h.a.parse(this.props.history.location.search);return t.timespan=e,"".concat(this.props.location.pathname,"?").concat(h.a.stringify(t))}},{key:"getChartActionUrl",value:function(e,t){var a=h.a.parse(this.props.history.location.search);return a[e]=t,null===t&&delete a[e],"".concat(this.props.location.pathname,"?").concat(h.a.stringify(a))}}]),a}(b.a.PureComponent));var K=Object(y.b)((function(e){return e.chart}),(function(e){return Object(_.bindActionCreators)(A,e)}))(z);t.default=K}}]);
//# sourceMappingURL=17.5d46c890.chunk.js.map