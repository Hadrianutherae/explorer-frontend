(this["webpackJsonpblockchain-explorer"]=this["webpackJsonpblockchain-explorer"]||[]).push([[15],{544:function(t,e,a){},547:function(t,e,a){},548:function(t,e,a){},549:function(t,e,a){},550:function(t,e,a){},600:function(t,e,a){"use strict";a.r(e),a.d(e,"ChartComponent",(function(){return K}));var r,n=a(4),i=a(5),c=a(9),s=a(7),l=a(6),o=a(24),p=a.n(o),m=a(35),h=a.n(m),u=a(0),b=a.n(u),d=a(53),f=a.n(d),v=a(17),y=a(18),_=a(22),E=a(12);!function(t){t.DAYS_30="30days",t.DAYS_60="60days",t.DAYS_180="180days",t.YEAR_1="1year",t.YEAR_2="2years",t.ALLTIME="alltime"}(r||(r={}));var g=a(47),k=a(26),j=a.n(k),O=a(11),C=function(){function t(){Object(n.a)(this,t)}return Object(i.a)(t,null,[{key:"getChart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.timespan===r.ALLTIME?"all":e.timespan;return j.a.get("".concat(O.a.apiUrl,"/charts/").concat(t),{params:{timespan:a||r.DAYS_30}}).then((function(e){return e?e.data:Promise.reject("Block api service. Request: ".concat(O.a.apiUrl,"/charts/").concat(t,"."))}))}}]),t}(),N={getChart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){return a({type:g.a}),C.getChart(t,e).then((function(t){a({payload:{data:t},type:g.b})}))}}},F=a(1),T=a(170),S=a.n(T),A=a(318),D=a(55),L=a(41),U=(a(544),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var t=S()(this.props.label).format("DD.MM.YYYY"),e=null,a=this.props.payload?this.props.payload[0]:null;if(a){var r=a.payload.type||"chart",n=this.props.isScale?a.payload.originalValue:this.props.payload[0].value;e=Object(D.a)(r,n)}return b.a.createElement("div",{className:"bi-chart-tooltip"},b.a.createElement("div",{className:"bi-chart-tooltip__label"},t),e)}}]),a}(b.a.PureComponent)),M=function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).formatLabel=r.formatLabel.bind(Object(c.a)(r)),r.formatXLabel=r.formatXLabel.bind(Object(c.a)(r)),r.formatTooltip=r.formatTooltip.bind(Object(c.a)(r)),r.renderTooltip=r.renderTooltip.bind(Object(c.a)(r)),r}return Object(i.a)(a,[{key:"render",value:function(){var t=this.props.data,e=Math.ceil(Math.max.apply(null,t.map((function(t){return t.value})))),a=(Math.ceil(e/Math.pow(10,e.toString().length-1))+2)*Math.pow(10,e.toString().length-1);return this.props.isScale&&(t=t.map((function(t){return Object(F.a)(Object(F.a)({},t),{},{originalValue:t.value,value:t.value<=0?1e-4:t.value})}))),b.a.createElement(A.g,{width:"100%",height:"100%"},b.a.createElement(A.b,{data:t},b.a.createElement("defs",null,b.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"1",x2:"1",y2:"0"},b.a.createElement("stop",{offset:"20%",stopColor:"#0078FF",stopOpacity:0}),b.a.createElement("stop",{offset:"80%",stopColor:"#0078FF",stopOpacity:.2}))),this.props.compact?null:b.a.createElement(A.c,{stroke:"#e8e8e8",vertical:!1,strokeDasharray:"6 4",fill:"#fff"}),b.a.createElement(A.i,{dataKey:"timestamp",tick:{fill:"#828795",fontSize:14},tickLine:!1,tickCount:100,tickMargin:10,tickFormatter:this.formatXLabel,minTickGap:30,hide:this.props.compact}),b.a.createElement(A.j,{dataKey:"value",domain:[this.props.isScale?1e-4:0,a],scale:this.props.isScale?"log":"auto",tickMargin:10,tickLine:!1,tickCount:5,minTickGap:30,tick:{fill:"#828795",fontSize:14},tickFormatter:this.formatLabel,hide:this.props.compact}),b.a.createElement(A.h,{content:this.renderTooltip}),b.a.createElement(A.a,{type:"linear",dataKey:"value",stroke:"#0078FF",yAxisId:0,fillOpacity:1,fill:"url(#colorUv)",animationDuration:300,isAnimationActive:!this.props.compact})))}},{key:"renderTooltip",value:function(t){return b.a.createElement(U,Object.assign({},t,{isScale:this.props.isScale}))}},{key:"formatLabel",value:function(t){return Object(L.a)(t,{fractionDigits:0})}},{key:"formatXLabel",value:function(t){return S()(t).format("DD MMM YYYY")}},{key:"formatTooltip",value:function(t){return Object(D.a)("chart",t)}}]),a}(b.a.PureComponent),Y=a(27),w=a(545),x=a.n(w),B=(a(547),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return b.a.createElement("div",{className:"bi-chart-actions"},this.props.isScale?b.a.createElement(_.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale",null)},b.a.createElement(v.a,{id:"components.chart-actions.linear-scale"})):b.a.createElement(_.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale","1")},b.a.createElement(v.a,{id:"components.chart-actions.logarithmic-scale"})),this.props.data&&b.a.createElement(x.a,{file:"data.csv",content:this.getCSVData(),className:"bi-chart-actions__action bi-btn bi-btn--flat"},b.a.createElement(v.a,{id:"components.chart-actions.csv"})),this.props.data&&b.a.createElement(x.a,{file:"data.json",content:JSON.stringify(this.props.data),className:"bi-chart-actions__action bi-btn bi-btn--flat"},b.a.createElement(v.a,{id:"components.chart-actions.json"})))}},{key:"getCSVData",value:function(){if(!this.props.data)return"";var t=this.props.data.map((function(t){return[t.timestamp,t.value].join(", ")}));return["timestamp, value"].concat(Object(Y.a)(t)).join("\r\n")}}]),a}(b.a.Component)),P=(a(548),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var t=this,e=this.props.data.map((function(t){return{name:t.name,value:t.value}})).sort((function(t,e){return e.y-t.y})),a=["#0088FE","#85144b","#FFBB28","#FF8042","#2ECC40","#FF4136","#001f3f","#0074D9","#FF851B","#00C49F","#F012BE","#7FDBFF","#FFDC00","#39CCCC","#3D9970","#B10DC9","#01FF70"];return b.a.createElement("div",{className:"bi-pie-chart"},b.a.createElement("div",{className:"bi-pie-chart__chart"},b.a.createElement(A.g,null,b.a.createElement(A.f,null,b.a.createElement(A.e,{data:e,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",isAnimationActive:!1,label:!0},e.map((function(t,e){return b.a.createElement(A.d,{key:"cell-".concat(t.value),fill:a[e%a.length]})}))),b.a.createElement(A.h,null)))),b.a.createElement("div",{className:"bi-pie-chart__legend bi-pie-chart__table bi-table"},b.a.createElement("div",{className:"bi-pie-chart__row bi-table__row bi-pie-chart__row--header"},b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},this.props.labels.name),b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},this.props.labels.value)),this.props.data.map((function(e,a){return b.a.createElement("div",{className:"bi-pie-chart__row bi-table__row",key:a},b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},b.a.createElement("span",null,t.props.labels.name)," ",e.name),b.a.createElement("div",{className:"bi-pie-chart__cell bi-table__cell"},b.a.createElement("span",null,t.props.labels.value)," ",e.value))}))))}}]),a}(b.a.PureComponent)),R=(a(549),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(t){return Object(n.a)(this,a),e.call(this,t)}return Object(i.a)(a,[{key:"render",value:function(){var t=this;return b.a.createElement("div",{className:"bi-timespan"},Object.keys(r).map((function(e){var a=p()({"bi-btn":!0,"bi-btn--flat":!0,"bi-timespan__span":!0,"bi-timespan__span--active":t.props.selected===r[e]});return b.a.createElement(_.Link,{className:a,key:e,to:t.props.getTimespanUrl(r[e])},b.a.createElement(v.a,{id:"components.timespan.span.".concat(r[e])}))})))}}]),a}(b.a.Component)),J=a(10),z=(a(550),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).params={},r.getTimespanUrl=r.getTimespanUrl.bind(Object(c.a)(r)),r.getChartActionUrl=r.getChartActionUrl.bind(Object(c.a)(r)),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.params=this.getParams(),this.props.getChart(this.props.match.params.chartType,this.params)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.getParams();JSON.stringify(e)!==JSON.stringify(this.params)&&(this.params=e,this.props.getChart(this.props.match.params.chartType,this.params))}},{key:"render",value:function(){var t=h.a.parse(this.props.location.search),e=t.iframe,a=t.scale,r=p()({"bi-chart":!0,"bi-chart--iframe":e,"bi-chart--scale":"1"===a,"g-flex-column":!0,"g-flex-column__item-fixed":!0});return b.a.createElement("div",{className:r},b.a.createElement(v.a,{id:"common.pages.chart.title.".concat(this.props.match.params.chartType)},(function(t){return b.a.createElement(f.a,null,b.a.createElement("title",null,t))})),b.a.createElement("div",{className:"bi-chart__header g-flex-column__item-fixed"},b.a.createElement("div",{className:"bi-chart__line"},b.a.createElement(_.Link,{className:"bi-chart__btn-back",to:"/charts"},b.a.createElement(J.b,{className:"bi-chart__btn-back-icon"}),b.a.createElement("span",{className:"bi-chart__btn-back-title"},b.a.createElement(v.a,{id:"components.chart.back"})))),b.a.createElement("div",{className:"bi-chart__title"},b.a.createElement(v.a,{id:"components.chart.title.".concat(this.props.match.params.chartType)})),b.a.createElement("div",{className:"bi-chart__subtitle"},b.a.createElement(v.a,{id:"components.chart.subtitle.".concat(this.props.match.params.chartType)}))),this.renderBody())}},{key:"renderBody",value:function(){return b.a.createElement("div",{className:"bi-chart__body g-flex-column__item"},b.a.createElement("div",{className:"bi-chart__chart"},this.props.data&&this.renderChart()),this.renderControls())}},{key:"renderChart",value:function(){var t=h.a.parse(this.props.location.search).iframe;switch(this.props.match.params.chartType){case"hash-rate-distribution":return b.a.createElement(P,{data:this.formatData(),compact:!!t,labels:{name:b.a.createElement(v.a,{id:"components.chart.hash-rate-distribution.labels.name"}),value:b.a.createElement(v.a,{id:"components.chart.hash-rate-distribution.labels.value"})}});default:return b.a.createElement(M,{data:this.formatData(),compact:!!t,isScale:this.params.scale})}}},{key:"renderControls",value:function(){switch(this.props.match.params.chartType){case"hash-rate-distribution":return null;default:return b.a.createElement("div",{className:"bi-chart__controls g-flex"},b.a.createElement(R,{selected:this.params.timespan,getTimespanUrl:this.getTimespanUrl}),b.a.createElement(B,{isScale:this.params.scale,data:this.props.data,getChartActionUrl:this.getChartActionUrl}))}}},{key:"formatData",value:function(){switch(this.props.match.params.chartType){case"miners-revenue":case"total":return this.props.data.map((function(t){return{timestamp:t.timestamp,type:"coin",value:t.value/1e9}}));case"blockchain-size":case"block-size":return this.props.data.map((function(t){return{timestamp:t.timestamp,type:"bytes",value:t.value}}));case"hash-rate":return this.props.data.map((function(t){return{timestamp:t.timestamp,type:"hashRate",value:t.value}}));default:return this.props.data}}},{key:"getParams",value:function(){var t=h.a.parse(this.props.history.location.search),e=Object.keys(r).find((function(e){return r[e]===t.timespan}));return{scale:"1"===t.scale,timespan:e?r[e]:r.DAYS_30}}},{key:"getTimespanUrl",value:function(t){var e=h.a.parse(this.props.history.location.search);return e.timespan=t,"".concat(this.props.location.pathname,"?").concat(h.a.stringify(e))}},{key:"getChartActionUrl",value:function(t,e){var a=h.a.parse(this.props.history.location.search);return a[t]=e,null===e&&delete a[t],"".concat(this.props.location.pathname,"?").concat(h.a.stringify(a))}}]),a}(b.a.PureComponent));var K=Object(y.b)((function(t){return t.chart}),(function(t){return Object(E.b)(N,t)}))(z);e.default=K}}]);
//# sourceMappingURL=15.5076560b.chunk.js.map